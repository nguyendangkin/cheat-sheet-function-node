def delete_file(index):
    txt_files = [f for f in os.listdir('.') if f.endswith('.txt')]
    
    try:
        file_name = txt_files[index - 1]
        os.remove(file_name)
        print(f"File '{file_name}' has been deleted.")
        
        try:
            subprocess.run(['git', 'add', file_name], check=True)
            subprocess.run(['git', 'commit', '-m', f'Delete {file_name}'], check=True)
            
            # Cố gắng đẩy thay đổi lên repo
            try:
                subprocess.run(['git', 'push'], check=True)
                print(f"File '{file_name}' deletion has been pushed to the repository.")
            except subprocess.CalledProcessError:
                # Nếu đẩy bị lỗi, thực hiện git pull và thử đẩy lại
                print("Push failed. Pulling latest changes from the repository...")
                subprocess.run(['git', 'pull'], check=True)
                print("Retrying push after pulling...")
                try:
                    subprocess.run(['git', 'push'], check=True)
                    print(f"File '{file_name}' deletion has been pushed to the repository after pulling.")
                except subprocess.CalledProcessError:
                    print("Failed to push the deletion after pulling.")
            
        except subprocess.CalledProcessError:
            print("Failed to commit the deletion.")
            
    except IndexError:
        print(f"No file found at index {index}.")
    except FileNotFoundError:
        print(f"File '{file_name}' does not exist.")